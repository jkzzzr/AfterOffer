package my;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.StringTokenizer;

public class HelpWYR {

	public static void main(String[] args) throws IOException {
		System.out.println("==");
		func1("F:\\Fusion\\2010-wyr");
		writeAvg("F:\\Fusion\\2010-LL");
	}
	public static ArrayList<ArrayList<Double>> eRRIA = new ArrayList<ArrayList<Double>>();
	public static ArrayList<ArrayList<Double>> Andcg = new ArrayList<ArrayList<Double>>();
	public static int allnumber = 0;
	public static void func1(String path) throws IOException{
		int lineNumber = 0;
		BufferedReader br = new BufferedReader(new FileReader(path));
		String line = "";
		
		
		while ((line = br.readLine())!=null){
			lineNumber++;
			
			if (line.contains("******")){
				allnumber++;
				
				if (line.contains("erria")){
					br.readLine();
					for (int i = 0; i < 19;i++){
						if (eRRIA.size()==i ){
							eRRIA.add(new ArrayList<Double>());
						}
						line = br.readLine();
						lineNumber++;
						StringTokenizer st = new StringTokenizer(line);
						st.nextToken();
						int j = -1;
						while (st.hasMoreElements()){
							j++;
							double d = Double.parseDouble(st.nextToken());
							if (eRRIA.get(i).size() == j){
								eRRIA.get(i).add(d);
							}else {
								double temp = eRRIA.get(i).get(j);
								eRRIA.get(i).set(j, temp+temp);
							}
						}
						
					}
				}
				if (line.contains("ndcg")){
					br.readLine();
					for (int i = 0; i < 19;i++){
						lineNumber++;
						if (Andcg.size()==i ){
							Andcg.add(new ArrayList<Double>());
						}
						line = br.readLine();
						StringTokenizer st = new StringTokenizer(line);
						st.nextToken();
						int j = -1;
						String look = "";
						try{
							while (st.hasMoreElements()){
								j++;
								look = st.nextToken();
								double d = Double.parseDouble(look);
								if (Andcg.get(i).size() == j){
									Andcg.get(i).add(d);
								}else {
									double temp = Andcg.get(i).get(j);
									Andcg.get(i).set(j, temp+temp);
								}
							}
						}catch(Exception exception){
							System.out.println(exception.getMessage());
							System.err.println(lineNumber+"\t"+line);
						}
						finally{
						//	System.out.println("123");
						}
						
					}
				}
			}
			
		}
		
	}
	
	public static void writeAvg(String path) throws IOException{
		BufferedWriter bw = new BufferedWriter( new FileWriter(path, true));
		bw.write("erria\n");
		for (int i = 0; i < 19;i++){
			for (int j = 0; j < eRRIA.get(i).size();j++){
				double result = eRRIA.get(i).get(j)/allnumber;
				bw.write(result+"\t");
			}
			bw.write("\n");
		}
		
		bw.write("andcg\n");
		for (int i = 0; i < 19;i++){
			for (int j = 0; j < Andcg.get(i).size();j++){
				bw.write(Andcg.get(i).get(j)/allnumber+"\t");
			}
			bw.write("\n");
		}
		
		bw.close();
		
	}

}
